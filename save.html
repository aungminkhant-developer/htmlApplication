<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Save</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous" />

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/notiflix@3.2.6/dist/notiflix-3.2.6.min.css"
        integrity="sha256-quZ4+TPWUyQzuPnahKf6d8Xal6tZcYZTzSt4wFVEFn8=" crossorigin="anonymous" />
    <link rel="stylesheet" href="save.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/ladda-bootstrap/0.9.4/ladda-themeless.min.css">
    <link rel="stylesheet" href="plugins/datepicker/datepicker.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/icheck-bootstrap/3.0.1/icheck-bootstrap.min.css"
        integrity="sha512-8vq2g5nHE062j3xor4XxPeZiPjmRDh6wlufQlfC6pdQ/9urJkU07NM0tEREeymP++NczacJ/Q59ul+/K2eYvcg=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.min.css">
</head>
</head>

<body>
    <nav class="navbar navbar-expand-lg" style="background-color: #e3f2fd;">
        <div class="container-fluid">
            <a class="navbar-brand" href="#">AMK</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarScroll"
                aria-controls="navbarScroll" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarScroll">
                <ul class="navbar-nav me-auto my-2 my-lg-0 navbar-nav-scroll" style="--bs-scroll-height: 100px;">
                    <li class="nav-item">
                        <a class="nav-link active" aria-current="page" href="save.html">Save</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="index.html">Home</a>
                    </li>


                </ul>

            </div>
        </div>
    </nav>
    <section class="vh-100 bg-image"
        style="background-image: url('https://mdbcdn.b-cdn.net/img/Photos/new-templates/search-box/img4.webp');">
        <div class="mask d-flex align-items-center h-100 gradient-custom-3">
            <div class="container h-100">
                <div class="row d-flex justify-content-center align-items-center h-100">
                    <div class="col-12 col-md-9 col-lg-7 col-xl-6">
                        <div class="card" style="border-radius: 15px;">
                            <div class="card-body p-3">
                                <h2 class="text-uppercase text-center mb-5">Welcome!</h2>

                                <form>

                                    <div class="form-outline mb-4">
                                        <input type="text" id="txtTitle" class="form-control form-control-lg" />
                                        <label class="form-label" for="txtTitle">Title</label>
                                    </div>

                                    <div class="form-outline mb-4">
                                        <input type="text" id="txtAuthor" class="form-control form-control-lg" />
                                        <label class="form-label" for="txtAuthor">Author</label>
                                    </div>

                                    <div class="form-outline mb-4">
                                        <input type="text" id="txtContent" class="form-control form-control-lg" />
                                        <label class="form-label" for="txtContent">Content</label>
                                    </div>

                                    <div class="form-outline mb-4">
                                        <input type="text" id="txtDate" class="form-control form-control-lg" />
                                        <label class="form-label" for="txtDate">Release Date</label>
                                    </div>

                                    <div>
                                        <div class="form-check">
                                            <input class="form-check-input" type="radio" id="male" name="gender"
                                                value="Male Writer">
                                            <label class="form-check-label" for="male">Male Writer</label>
                                        </div>

                                        <div class="form-check">
                                            <input class="form-check-input" type="radio" id="female" name="gender"
                                                value="Female Writer">
                                            <label class="form-check-label" for="female">Female Writer</label>
                                        </div>

                                        <div class="form-check">
                                            <input class="form-check-input" type="radio" id="other" name="gender"
                                                value="Other">
                                            <label class="form-check-label" for="other">Other</label>
                                        </div>

                                    </div>

                                    <div style="margin-bottom: 10px;">
                                        <label><b>Book Type </b></label>
                                        <div class="icheck-primary icheck-inline">
                                            <input type="checkbox" id="chb1" value="Poetry" name="txtGenre" />
                                            <label for="chb1">Poetry</label>
                                        </div>
                                        <div class="icheck-primary icheck-inline">
                                            <input type="checkbox" id="chb2" value="Fiction" name="txtGenre" />
                                            <label for="chb2">Fiction</label>
                                        </div>
                                        <div class="icheck-primary icheck-inline">
                                            <input type="checkbox" id="chb3" value="Comic" name="txtGenre" />
                                            <label for="chb3">Comic</label>
                                        </div>
                                    </div>


                                    <div class="d-flex justify-content-center">
                                        <button class="btn btn-success ladda-button" id="btnSave"
                                            data-style="expand-left"><span class="ladda-label">Save</span></button>
                                    </div>


                                </form>

                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js"
        integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL"
        crossorigin="anonymous"></script>
    <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/ladda-bootstrap/0.9.4/spin.min.js"
    integrity="sha512-qByKQKO3eTwzJtP8Y395YbP45QyYZNpJfYu8jfFpWgFTK2xWIiOER7G+63EoXk475fBFzY6HIhbEUio6m72EaQ=="
    crossorigin="anonymous" referrerpolicy="no-referrer"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/ladda-bootstrap/0.9.4/ladda.min.js"
    integrity="sha512-OxowQ96EheBKRxTivGsizVvTK8bWt2xZlymiMZ9MArbmOmuxbv+2IlC46k4gZPhZH5eVQAm0F6lk9Yt6M4xu7A=="
    crossorigin="anonymous" referrerpolicy="no-referrer"></script> -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ladda-bootstrap/0.9.4/spin.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ladda-bootstrap/0.9.4/ladda.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

    <script src="https://cdn.jsdelivr.net/npm/notiflix@3.2.6/dist/notiflix-aio-3.2.6.min.js"
        integrity="sha256-pXMqYvjzxYjuQ3+Iz0Zpw3Tk3BAoet8dOsODol/iqTI=" crossorigin="anonymous"></script>
    <script src="plugins/datepicker/datepicker.min.js"></script>

    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/toastify-js"></script>

    <script>

        Notiflix.Notify.init({
            position: 'center-top'


        });
        $("#btnSave").click(function (e) {
            e.preventDefault();
            var l = Ladda.create(this);
            l.start();

            setTimeout(() => {
                l.stop();
            }, 1000);

            var inputTitle = $('#txtTitle').val();
            var inputAuthor = $('#txtAuthor').val();
            var inputContent = $('#txtContent').val();
            var date = $('#txtDate').val();
            var genre = [];
            $("input[name='txtGenre']:checked").each(function () {
                genre.push($(this).val());
            });
            genre = genre.join(",");
            var gender = $("input[name='gender']:checked").val();


            if (inputTitle === null || inputAuthor === null || inputContent === null) {
                Notiflix.Notify.warning('Data Cannot Be Blank!!!!');
                return;
            }
            else {
                if (inputTitle === null || inputAuthor === undefined || inputContent === '' || !inputTitle.trim()) {
                    Notiflix.Notify.warning('please enter Data');
                    return;
                }



                // var title = $("#txtTitle").val();
                // var author = $("#txtAuthor").val();
                // var content = $("#txtContent").val();
                // var releaseDate = $("#txtDate").val();
                // var genders = getSelectedRadioValue('gender');
                // var types = genre;






                // var lst = [];
                // var jsonStr = localStorage.getItem("Tbl_Test");
                // if (!(jsonStr === undefined || jsonStr === null || jsonStr === "")) {
                //     lst = JSON.parse(jsonStr);
                // }
                var lst = getData();

                const testObj = {
                    Id: uuidv4(),
                    Title: inputTitle,
                    Author: inputAuthor,
                    Content: inputContent,
                    ReleaseDate: date,
                    types: genre,
                    genders: gender,
                    



                };

                lst.push(testObj);

                localStorage.setItem("Tbl_Test", JSON.stringify(lst));

                $("#txtTitle").val("");
                $("#txtAuthor").val("");
                $("#txtContent").val("");
                $("#txtDate").val("");
                $("input[name='txtGenre']").prop('checked', false);
                $("input[name='gender']").prop('checked', false);
                
                $("#txtTitle").focus();

                // localStorage.setItem("Test", test);
                // sessionStorage.setItem("Test", test);


                Toastify({
                    text: "Save Successful !!",
                    className: "success",
                    gravity: "top",
                    position: "center",
                    style: {
                        background: "linear-gradient(to right, #00b09b, #96c93d)"
                    }
                }).showToast();

            }


        });

        function uuidv4() {
            return "10000000-1000-4000-8000-100000000000".replace(/[018]/g, (c) =>
                (
                    c ^
                    (crypto.getRandomValues(new Uint8Array(1))[0] & (15 >> (c / 4)))
                ).toString(16)
            );
        }

        function getData() {
            var lst = [];
            var jsonStr = localStorage.getItem("Tbl_Test");
            if (!(jsonStr === undefined || jsonStr === null || jsonStr === "")) {
                lst = JSON.parse(jsonStr);
            }
            return lst;
        }

        function setLocal(lst) {
            localStorage.setItem("Tbl_Test", JSON.stringify(lst));
        }

        $('[data-toggle="datepicker"]').datepicker();

        $('#txtDate').datepicker({
            autoHide: true,
            format: 'dd-mm-yyyy'
        });

        
    </script>
</body>

</html>